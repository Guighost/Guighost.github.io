function loadGameSM() { function e(e) { var a = e.changedTouches[0], t = ""; switch (e.type) { case "touchstart": t = "mousedown"; break; case "touchmove": t = "mousemove"; break; case "touchend": t = "mouseup"; break; default: return }var r = document.createEvent("MouseEvent"); r.initMouseEvent(t, !0, !0, window, 1, a.screenX, a.screenY, a.clientX, a.clientY, !1, !1, !1, !1, 0, null), a.target.dispatchEvent(r) } function a() { clearInterval(we), be = !1, we = setInterval(function () { be = !be, t(), setTimeout(function () { r() }, 2e3) }, 6e3) } function t() { animTimer = setInterval(function () { var e = 0; e = De, 5 == De && (e = 3), 6 == De && (e = 2), 7 == De && (e = 1), imgArray2[13].src = "Images/Hero/idle_" + e + ".png", (De += 1) > 7 && (De = 1) }, 250) } function r() { clearInterval(animTimer) } function n() { var e = 45; O.beginPath(), O.arc(29, 39.5, e, 0, 2 * Math.PI, !1), O.fillStyle = "#00000F", O.fill(), O.lineWidth = 5, O.strokeStyle = "#003300", O.stroke(), e = 15, O.beginPath(), O.arc(15, 89.5, e, 0, 2 * Math.PI, !1), O.fillStyle = "red", O.fill(), O.lineWidth = 3, O.strokeStyle = "#003300", O.stroke(), O.fillStyle = "#FFFFFF", O.font = "10px Comic Sans MS", y(Math.round(player1.health), 4, 93, 20), e = 15, O.beginPath(), O.arc(45, 89.5, e, 0, 2 * Math.PI, !1), O.fillStyle = "grey", O.fill(), O.lineWidth = 3, O.strokeStyle = "#003300", O.stroke(), O.fillStyle = "#FFFFFF", O.font = "10px Comic Sans MS", y(Math.round(player1.defense), 34, 93, 20), O.drawImage(imgArray2[13], -2, 6, 62, 67); var a = 0; (a = 12 * playerClusterCount) < 1 && (a = 1), O.drawImage(imgArray2[20], 54, 2), O.drawImage(imgArray2[22], 81, 10, a, 13); var t = 100 - player1.health / player1.healthMax * 100; t > 100 && (t = 100), O.drawImage(imgArray2[14], -1, 111, 30, 145), player1.health < 0 && (player1.health = 0), O.drawImage(imgArray2[15], 7, 123 + t, 14, player1.health / player1.healthMax * 100); var r = 100 - player1.defense / player1.defenseMax * 100; r > 100 && (r = 100), O.drawImage(imgArray2[16], 29, 111, 30, 145), player1.defense < 0 && (player1.defense = 0), O.drawImage(imgArray2[17], 36, 123 + r, 14, player1.defense / player1.defenseMax * 100), ye && (O.fillStyle = "#FF0000", O.font = "18px Comic Sans MS Bold", y("- " + Math.round(ge), 5, 15, 50)) } function l() { var e = 45; O.beginPath(), O.arc(539, 36.5, e, 0, 2 * Math.PI, !1), O.fillStyle = "#000003", O.fill(), O.lineWidth = 5, O.strokeStyle = "#003300", O.stroke(), e = 14, O.beginPath(), O.arc(523, 86.5, e, 0, 2 * Math.PI, !1), O.fillStyle = "grey", O.fill(), O.lineWidth = 3, O.strokeStyle = "#003300", O.stroke(), O.fillStyle = "#FFFFFF", O.font = "10px Comic Sans MS", y(Math.round(enemy.defense), 512, 90, 20), e = 14, O.beginPath(), O.arc(552, 86.5, e, 0, 2 * Math.PI, !1), O.fillStyle = "red", O.fill(), O.lineWidth = 3, O.strokeStyle = "#003300", O.stroke(), O.fillStyle = "#FFFFFF", O.font = "10px Comic Sans MS", y(Math.round(enemy.health), 540, 90, 20); var a = enemy.playerLevel - 1; O.drawImage(imgArray4[a], 508, 6, 62, 67), O.drawImage(imgArray2[21], 394, 2), O.drawImage(imgArray2[22], 401, 10); var t = 100 - enemy.defense / enemy.defenseMax * 100; O.drawImage(imgArray2[16], 511, 111, 28, 148), enemy.defense < 0 && (enemy.defense = 0), O.drawImage(imgArray2[17], 517, 122 + t, 14, enemy.defense / enemy.defenseMax * 100); var r = 100 - enemy.health / enemy.healthMax * 100; O.drawImage(imgArray2[14], 537, 112, 28, 148), enemy.health < 0 && (enemy.health = 0), O.drawImage(imgArray2[15], 543, 122 + r, 14, enemy.health / enemy.healthMax * 100), ie && (O.fillStyle = "#FF0000", O.font = "18px Comic Sans MS", y("- " + Math.round(de), 509, 15, 50)) } function m(e) { window.requestAnimationFrame(m), o(e), i() } function o(e) { var t = (e - R) / 100; if (R = e, s(t), xe == Me.ready) { if (Ee.length <= 0 && (ee = !0, ae >= 2 ? ae++ : ae = 1, ee && function () { v(); for (var e = Ie.rows, a = Ie.columns, t = 0; t < e; t++)for (var r = 0; r < a; r++)matchlength = 3, Ae.push({ column: t, row: r + 1 - matchlength, length: matchlength, horizontal: !1 }); ee = !1, M(), xe = Me.resolve, ke = 0, Le = 0 }()), He && (Le += t) > Te) { if (M(), Ee.length > 0 && 0 == Ce) { var n = Ee[Math.floor(Math.random() * Ee.length)]; H(n.column1, n.row1, n.column2, n.row2), Ce = 1 } else He = !1, Ce = 0, a(); Le = 0 } } else if (xe == Me.resolve) { if (Le += t, 0 == ke) { if (Le > Te) { if (S(), Ae.length > 0) { Fe.stop(), 1 == soundOn && Fe.play(); for (var l = 0; l < Ae.length; l++) { if (Be += 100 * (Ae[l].length - 2), $ += 100 * (Ae[l].length - 2), X += Ae[l].length - 2, !1 === He) { i = 6 * player1.playerLevel + 1 * (Ae[l].length - 2); playerClusterCount += 1; var m = Ie.tiles[Ae[l].column][Ae[l].row].type, o = ue[m], y = read_prop(player1, o); if (he = y, pe = !0, ce < 10 && ce >= 0 && (i += he, console.log("********************PCLUSTERCOUNT " + playerClusterCount), playerClusterCount >= 8 && ("sparkPower" == o && (document.getElementById("lightningFullBack").style.display = "block", setTimeout(function () { document.getElementById("lightningFullBack").style.display = "none" }, 900)), "arcanePower" == o && (document.getElementById("arcaneFullBack").style.display = "block", setTimeout(function () { document.getElementById("arcaneFullBack").style.display = "none" }, 900)), "firePower" == o && (document.getElementById("fireFullBack").style.display = "block", setTimeout(function () { document.getElementById("fireFullBack").style.display = "none" }, 900)), "meteorPower" == o && (document.getElementById("meteorFullBack").style.display = "block", setTimeout(function () { document.getElementById("meteorFullBack").style.display = "none" }, 900)), "swordPower" == o && (document.getElementById("swordFullBack").style.display = "block", setTimeout(function () { document.getElementById("swordFullBack").style.display = "none" }, 1e3)), "earthPower" == o && (document.getElementById("earthFullBack").style.display = "block", setTimeout(function () { document.getElementById("earthFullBack").style.display = "none" }, 1e3)), "airPower" == o && (document.getElementById("airFullBack").style.display = "block", setTimeout(function () { document.getElementById("airFullBack").style.display = "none" }, 1e3)), playerClusterCount = 0), he = 0, ce = 10), enemy.defenseDrop = enemy.defenseDrop + i, enemy.defenseDrop >= enemy.defenseMax && (enemy.defenseDrop = enemy.defenseMax), enemy.defense = enemy.defenseMax - enemy.defenseDrop, enemy.defense <= 0 && (enemy.defense = 0), (g = enemy.defense / enemy.defenseMax) > 0 && (i *= g), de = i, ie = !0, setTimeout(function () { ie = !1 }, 1e3), enemy.damage = enemy.damage + i, enemy.health = enemy.healthMax - enemy.damage, console.log("*****enemy Heal " + enemyHeal), enemy.health < 250 && enemy.playerLevel >= 14 && 1 == enemyHeal) { document.getElementById("healNameEnemy").innerHTML = enemy.name, document.getElementById("healHeartEnemy").style.display = "block"; setTimeout(function () { document.getElementById("healHeartEnemy").style.display = "none", enemy.health = enemy.health + enemy.healthMax / 2, enemy.health > enemy.healthMax && (enemy.health = enemy.healthMax), console.log("*****enemy healed for " + enemy.healthMax / 2), enemyHeal = !1 }, 2500) } enemy.health <= 0 && N(), le = !0 } if (He) { r(); var i = 5 * enemy.playerLevel + 1 * (Ae[l].length - 2) + 2 * difficulty; enemyClusterCount += 1, player1.defenseDrop = player1.defenseDrop + i, player1.defenseDrop >= player1.defenseMax && (player1.defenseDrop = player1.defenseMax), player1.defense = player1.defenseMax - player1.defenseDrop, player1.defense <= 0 && (player1.defense = 0); var g = player1.defense / player1.defenseMax; g > 0 && (i *= g), ge = i, ye = !0, setTimeout(function () { ye = !1 }, 1e3), player1.damage = player1.damage + i, player1.health = player1.healthMax - player1.damage, He = !1, le = !1, player1.health <= 0 && (player1.health = 0, Pe = !0, ae = 0) } 1 == Ae.length && !He && enemy.health > 0 && (document.getElementById("message").style.display = "block", setTimeout(function () { He = !0, le = !0, be = !1, a() }, 1200), setTimeout(function () { document.getElementById("message").style.display = "none", He = !1, le = !1, be = !1, a() }, 1500)) } B(), ke = 1 } else xe = Me.ready; Le = 0, be = !1 } } else 1 == ke ? Le > Te && (k(), ke = 0, Le = 0, S(), Ae.length <= 0 && (xe = Me.ready)) : 2 == ke ? Le > Te && (b(Se.column1, Se.row1, Se.column2, Se.row2), S(), Ae.length > 0 ? (ke = 0, Le = 0, xe = Me.resolve) : (ke = 3, Le = 0), M(), S()) : 3 == ke && Le > Te && (b(Se.column1, Se.row1, Se.column2, Se.row2), xe = Me.ready); M(), S() } } function s(e) { V > .5 && (Z = Math.round(Y / V), V = 0, Y = 0), V += e, Y++ } function y(e, a, t, r) { var n = O.measureText(e); O.fillText(e, a + (r - n.width) / 2, t) } function i() { g(), O.fillStyle = "blue", O.font = "8px Comic Sans MS", l(), y("Score", 261, Ie.y + 135, 40), O.font = "8px Comic Sans MS", y(Be, 244, Ie.y + 145, 75), d(); var e = Ie.columns * Ie.tilewidth, a = Ie.rows * Ie.tileheight; O.fillStyle = "#000000", O.fillRect(Ie.x - 2, Ie.y - 4, e + 8, a + 8), c(), f(), be && Ae.length <= 0 && xe == Me.ready && I(), Pe && (0 == ae && (gameSoundLoop.pause(), soundOn && We.play(), ae++), O.fillStyle = "rgba(0, 0, 0, 0.8)", O.fillRect(Ie.x, Ie.y, e, a), O.drawImage(imgArray2[7], 60, 5), O.drawImage(imgArray2[8], 110, 230), O.drawImage(imgArray2[9], 315, 230), xe = Me.almostOver), xe == Me.levelUp && (O.fillStyle = "rgba(22, 30, 29, 0.9)", O.fillRect(Ie.x, Ie.y, e, a), 14 == player1.playerLevel && O.drawImage(imgArray2[23], 6, 8), 28 == player1.playerLevel && O.drawImage(imgArray2[24], 6, 8), 43 == player1.playerLevel && O.drawImage(imgArray2[25], 6, 8), O.drawImage(imgArray2[1], 170, 20), O.drawImage(imgArray2[2], 235, 135), O.drawImage(imgArray2[3], 245, 200), O.drawImage(imgArray2[4], 200, 55), Q >= 4 && O.drawImage(imgArray2[4], 305, 55), Q >= 5 && O.drawImage(imgArray2[5], 246, 35), q >= 1 && (K = 1), O.font = "14px Comic Sans MS", O.fillStyle = "#cc00cc", y("YOU  WIN", 250, 40, 70), O.font = "16px Comic Sans MS", O.fillStyle = "#cc00cc", y(" +" + Q, 270, 130, 50), y(starCash, 270, 159, 50), y(enemy.name + " loses ", 260, 192, 50), O.font = "22px Comic Sans MS", y("Next", Ie.x + 1, Ie.y + a - 55, e), 1 == q && (q = 0, J = 1e3 * ++j, player1.playerLevel = player1.playerLevel + 1, Q = 3, ne <= 45 ? (Q = 5, O.drawImage(imgArray2[4], 305, 65), O.drawImage(imgArray2[5], 246, 45)) : ne <= 60 ? (Q = 4, O.drawImage(imgArray2[4], 305, 65)) : ne >= 61 && (Q = 3), starCash += Q, localStorage.starCash = starCash, O.font = "30px Comic Sans MS", O.fillStyle = "#cc00cc", y(" +" + Q, 210, 159, 50), localStorage.setItem("spellMatch_lvlRating_lvl" + (player1.playerLevel - 1), Q - 2))), xe == Me.levelUpPlyr && (p(), G()) } function g() { O.fillStyle = "#996600", O.fillRect(0, 0, z.width, z.height), O.fillStyle = "#660033", O.fillRect(1, 1, z.width - 2, z.height - 2), O.drawImage(imgArray2[6], 175, -2), O.font = "14px Comic Sans MS"; var e = player1.playerLevel; O.fillStyle = "blue", O.font = "12px Comic Sans MS", O.fillText("Level: ", 192, Ie.y - 8), O.fillText(e, 357, Ie.y - 8), O.drawImage(imgArray2[19], 180, 282), O.fillStyle = "Red", O.font = "10px Comic Sans MS", O.fillText(player1.name.toUpperCase() + "  Vs.  " + enemy.name.toUpperCase(), 210, 305), O.drawImage(imgArray2[19], 440, 287, 125, 30), O.drawImage(imgArray2[19], 0, 287, 125, 30), O.drawImage(imgArray2[2], 2, 258, 60, 30), O.fillStyle = "green", O.font = "16px Comic Sans MS", O.fillText(starCash, 26, 278), n() } function d() { for (var e = 0; e < Ge.length; e++) { O.fillStyle = "#cc00cc", O.fillRect(Ge[e].x, Ge[e].y, Ge[e].width, Ge[e].height), O.fillStyle = "#ffffff", O.font = "16px Times New Roman"; var a = O.measureText(Ge[e].text); O.fillText(Ge[e].text, Ge[e].x + (Ge[e].width - a.width) / 2, Ge[e].y + 23), O.drawImage(imgArray3[0], 12, 288), O.drawImage(imgArray3[1], 47, 288), O.drawImage(imgArray3[2], 82, 288), O.drawImage(imgArray3[3], 452, 288), O.drawImage(imgArray3[4], 487, 288), O.drawImage(imgArray3[5], 522, 288) } } function c() { for (var e = 0; e < Ie.columns; e++)for (var a = 0; a < Ie.rows; a++) { var t = Ie.tiles[e][a].shift, r = u(e, a, 0, Le / Te * t); if (Ie.tiles[e][a].type >= 0) { var n = ve[Ie.tiles[e][a].type]; ve[Ie.tiles[e][a]]; h(r.tilex, r.tiley, n[0], n[1], n[2], n[3]) } Ie.selectedtile.selected && Ie.selectedtile.column == e && Ie.selectedtile.row == a && h(r.tilex - 3, r.tiley - 3, 255, 0, 0, 7) } if (xe == Me.resolve && (2 == ke || 3 == ke)) { var l = Se.column2 - Se.column1, m = Se.row2 - Se.row1, o = u(Se.column1, Se.row1, 0, 0), s = u(Se.column1, Se.row1, Le / Te * l, Le / Te * m), y = ve[Ie.tiles[Se.column1][Se.row1].type], i = (Ie.tiles[Se.column1][Se.row1].type, u(Se.column2, Se.row2, 0, 0)), g = u(Se.column2, Se.row2, Le / Te * -l, Le / Te * -m), d = ve[Ie.tiles[Se.column2][Se.row2].type]; Ie.tiles[Se.column1][Se.row1].type; h(o.tilex, o.tiley, 0, 0, 0, 8), h(i.tilex, i.tiley, 0, 0, 0, 8), 2 == ke ? (h(s.tilex, s.tiley, y[0], y[1], y[2], y[3]), h(g.tilex, g.tiley, d[0], d[1], d[2], d[3])) : (h(g.tilex, g.tiley, d[0], d[1], d[2], y[3]), h(s.tilex, s.tiley, y[0], y[1], y[2], d[3])) } } function p() { O.fillStyle = "#996600", O.fillRect(0, 0, z.width, z.height), O.font = "18px Times New Roman", O.drawImage(imgArray3[6], 90, 10), y("Level " + player1.playerLevel, 235, 40, 100), O.fillStyle = "#ffffff", y("Arcane", 130, 118, 100), O.drawImage(imgArray[0], 121, 100, 30, 30), y("Spark", 340, 119, 95), O.drawImage(imgArray[1], 415, 101, 30, 30), y("Fire", 130, 165, 100), O.drawImage(imgArray[2], 121, 146, 30, 30), y("Sword", 340, 165, 100), O.drawImage(imgArray[3], 415, 146, 30, 30), y("Meteor", 130, 205, 100), O.drawImage(imgArray[4], 121, 187, 30, 30), y("Earth", 340, 205, 100), O.drawImage(imgArray[5], 415, 186, 30, 30), y("Air", 260, 245, 50), O.drawImage(imgArray[6], 313, 226, 30, 30), oe > 0 && (O.drawImage(imgArray3[7], 205, 93), O.drawImage(imgArray3[7], 327, 95), O.drawImage(imgArray3[7], 205, 139), O.drawImage(imgArray3[7], 328, 140), O.drawImage(imgArray3[7], 206, 181), O.drawImage(imgArray3[7], 328, 181), O.drawImage(imgArray3[7], 220, 220)), O.fillStyle = "#ffffff", O.font = "30px Times New Roman", y(oe, 273, 105, 20), O.font = "20px Times New Roman", O.drawImage(imgArray3[8], 0, 250, 75, 75), O.fillText("SAVE", 12, 310, 60), O.fillStyle = "#000000", O.font = "24px Times New Roman", y(se, 258, 300, 60), O.fillStyle = "#000000", O.font = "18px Times New Roman", y(player1.healthMax, 163, 295, 60), O.fillStyle = "#000000", O.font = "18px Times New Roman", y(player1.defenseMax, 347, 295, 60), se > 0 && (O.drawImage(imgArray3[7], 220, 275, 25, 25), O.drawImage(imgArray3[7], 330, 275, 25, 25)), O.font = "20px Times New Roman", O.fillStyle = "red", O.fillText("Increase your spells", 245, 142, 80) } function u(e, a, t, r) { return { tilex: Ie.x + (e + t) * Ie.tilewidth, tiley: Ie.y + (a + r) * Ie.tileheight } } function h(e, a, t, r, n, l) { var m = imgArray[l]; m.height = Ie.tileheight, O.drawImage(m, e + 1, a + 1) } function f() { for (var e = 0; e < Ae.length; e++) { var a = u(Ae[e].column, Ae[e].row, 0, 0); Ae[e].horizontal ? (O.fillStyle = "#00ff00", O.fillRect(a.tilex + Ie.tilewidth / 2, a.tiley + Ie.tileheight / 2 - 2, (Ae[e].length - 1) * Ie.tilewidth, 4)) : (O.fillStyle = "#0000ff", O.fillRect(a.tilex + Ie.tilewidth / 2 - 2, a.tiley + Ie.tileheight / 2, 4, (Ae[e].length - 1) * Ie.tileheight)) } } function I() { for (var e = 0; e < Ee.length; e++) { var a = u(Ee[e].column1, Ee[e].row1, 0, 0), t = u(Ee[e].column2, Ee[e].row2, 0, 0); O.strokeStyle = "#ebf100", O.lineWidth = 3, O.beginPath(), O.moveTo(a.tilex + Ie.tilewidth / 2, a.tiley + Ie.tileheight / 2), O.lineTo(t.tilex + Ie.tilewidth / 2, t.tiley + Ie.tileheight / 2), O.stroke() } } function w(e) { if (e < 1) { Be = 0, J = 2e3, $ = 0, j = 1, ae = 0, ne = 0, $ = 1; for (var a = 0; a <= 6; a++) { var t = imgArray[a].src; t = "Images/" + a + ".png", imgArray[a].src = t } } Ue.stop(), We.stop(), gameSoundLoop.pause(), soundOn && gameSoundLoop.play(), enemy.health = enemy.healthMax, enemy.defense = enemy.defenseMax, enemy.defenseDrop = 0, enemy.damage = 0, player1.health = player1.healthMax, player1.defense = player1.defenseMax, player1.defenseDrop = 0, player1.damage = 0, playerClusterCount = 0, enemyClusterCount = 0, enemyHeal = !0, xe = Me.ready, Pe = !1, v(), M(), S() } function v() { for (var e = !1; !e;) { for (var a = 0; a < Ie.columns; a++)for (var t = 0; t < Ie.rows; t++)Ie.tiles[a][t].type = A(); E(), M(), Ee.length > 0 && (e = !0, gameOver = !1) } } function A() { return Math.floor(Math.random() * ve.length) } function E() { for (S(), Ae.length > 1 && O.drawImage(imgArray2[11], 50, 65); Ae.length > 0;)B(), k(), S() } function S() { Ae = []; for (t = 0; t < Ie.rows; t++)for (var e = 1, a = 0; a < Ie.columns; a++) { r = !1; a == Ie.columns - 1 ? r = !0 : Ie.tiles[a][t].type == Ie.tiles[a + 1][t].type && -1 != Ie.tiles[a][t].type ? e += 1 : r = !0, r && (e >= 3 && Ae.push({ column: a + 1 - e, row: t, length: e, horizontal: !0 }), e >= 4 && (te = !0), e = 1) } for (a = 0; a < Ie.columns; a++)for (var e = 1, t = 0; t < Ie.rows; t++) { var r = !1; t == Ie.rows - 1 ? r = !0 : Ie.tiles[a][t].type == Ie.tiles[a][t + 1].type && -1 != Ie.tiles[a][t].type ? e += 1 : r = !0, r && (e >= 3 && Ae.push({ column: a, row: t + 1 - e, length: e, horizontal: !1 }), e >= 5 && (re = !0), e = 1) } } function M() { Ee = []; for (a = 0; a < Ie.rows; a++)for (e = 0; e < Ie.columns - 1; e++)b(e, a, e + 1, a), S(), b(e, a, e + 1, a), Ae.length > 0 && Ee.push({ column1: e, row1: a, column2: e + 1, row2: a }); for (var e = 0; e < Ie.columns; e++)for (var a = 0; a < Ie.rows - 1; a++)b(e, a, e, a + 1), S(), b(e, a, e, a + 1), Ae.length > 0 && Ee.push({ column1: e, row1: a, column2: e, row2: a + 1 }); Ae = [] } function x(e) { for (var a = 0; a < Ae.length; a++)for (var t = Ae[a], r = 0, n = 0, l = 0; l < t.length; l++) { if (Ie.tiles[t.column][t.row].type > -1 && pe) { ce = Ie.tiles[t.column][t.row].type; var m = ue[ce], o = read_prop(player1, m); he = o, pe = !1 } e(a, t.column + r, t.row + n, t), t.horizontal ? r++ : n++ } } function B() { x(function (e, a, t, r) { Ie.tiles[a][t].type = -1 }); for (var e = 0; e < Ie.columns; e++)for (var a = 0, t = Ie.rows - 1; t >= 0; t--)-1 == Ie.tiles[e][t].type ? (a++ , Ie.tiles[e][t].shift = 0) : Ie.tiles[e][t].shift = a } function k() { for (var e = 0; e < Ie.columns; e++)for (var a = Ie.rows - 1; a >= 0; a--) { if (-1 == Ie.tiles[e][a].type) Ie.tiles[e][a].type = A(); else { var t = Ie.tiles[e][a].shift; t > 0 && b(e, a, e, a + t) } Ie.tiles[e][a].shift = 0 } } function L(e) { var a = Math.floor((e.x - Ie.x) / Ie.tilewidth), t = Math.floor((e.y - Ie.y) / Ie.tileheight); return a >= 0 && a < Ie.columns && t >= 0 && t < Ie.rows ? { valid: !0, x: a, y: t } : { valid: !1, x: 0, y: 0 } } function T(e, a, t, r) { return 1 == Math.abs(e - t) && a == r || 1 == Math.abs(a - r) && e == t } function b(e, a, t, r) { var n = Ie.tiles[e][a].type; Ie.tiles[e][a].type = Ie.tiles[t][r].type, Ie.tiles[t][r].type = n } function H(e, a, t, r) { Se = { column1: e, row1: a, column2: t, row2: r }, Ie.selectedtile.selected = !1, ke = 2, Le = 0, xe = Me.resolve } function C(e) { var a = U(z, e); fe && Ie.selectedtile.selected && (mt = L(a), mt.valid && T(mt.x, mt.y, Ie.selectedtile.column, Ie.selectedtile.row) && H(mt.x, mt.y, Ie.selectedtile.column, Ie.selectedtile.row)) } function P(e) { var a = U(z, e); if (!fe) { if (mt = L(a), xe != Me.levelUpPlyr) if (mt.valid) { var t = !1; if (Ie.selectedtile.selected) { if (mt.x == Ie.selectedtile.column && mt.y == Ie.selectedtile.row) return Ie.selectedtile.selected = !1, void (fe = !0); T(mt.x, mt.y, Ie.selectedtile.column, Ie.selectedtile.row) && (H(mt.x, mt.y, Ie.selectedtile.column, Ie.selectedtile.row), t = !0) } t || (Ie.selectedtile.column = mt.x, Ie.selectedtile.row = mt.y, Ie.selectedtile.selected = !0) } else Ie.selectedtile.selected = !1; fe = !0 } for (var r = 0; r < Ge.length; r++)a.x >= Ge[r].x && a.x < Ge[r].x + Ge[r].width && a.y >= Ge[r].y && a.y < Ge[r].y + Ge[r].height && (0 == r ? (w(0), ne = 0) : 1 == r && (He = !He, Ge[r].text = "Next")); if (a.x >= 12 && a.x < 44 && a.y >= 1 && a.y < 100) { n = document.getElementById("playerStatsParent").style.display; document.getElementById("playerStatsParent").style.display = "block" == n ? "none" : "block", updateStats() } if (a.x >= 12 && a.x < 44 && a.y >= 288 && a.y < 308) { n = document.getElementById("difficulty").style.display; document.getElementById("difficulty").style.display = "block" == n ? "none" : "block" } if (a.x >= 47 && a.x < 79 && a.y >= 288 && a.y < 308) { n = document.getElementById("goHome").style.display; document.getElementById("goHome").style.display = "block" == n ? "none" : "block", n = document.getElementById("goHome").style.display } if (a.x >= 82 && a.x < 112 && a.y >= 288 && a.y < 308 && (soundOn ? (Fe.pause(), gameSoundLoop.pause(), soundOn = !1, imgArray3[2].src = "Images/buttons/greySoundOff.png") : (soundOn = !0, gameSoundLoop.play(), imgArray3[2].src = "Images/buttons/greySound.png")), a.x >= 452 && a.x < 482 && a.y >= 288 && a.y < 308) { var n = document.getElementById("inventoryParent").style.display; document.getElementById("inventoryParent").style.display = "block" == n ? "none" : "block" } if (a.x >= 487 && a.x < 518 && a.y >= 288 && a.y < 308 && ("block" == (n = document.getElementById("trophyParent").style.display) ? document.getElementById("trophyParent").style.display = "none" : (document.getElementById("trophyParent").style.display = "block", cupWon > 0 && (document.getElementById("trophyLock1").style.display = "none"), cupWon > 1 && (document.getElementById("trophyLock2").style.display = "none"))), a.x >= 522 && a.x < 555 && a.y >= 288 && a.y < 308 && (document.getElementById("difficulty").style.display = "block"), xe == Me.levelUp && (G(), me = !0, oe += 1, se += 1, xe = Me.levelUpPlyr, 14 == player1.playerLevel && (cupWon = 1, localStorage.setItem("spellMatch_cupWon", cupWon))), xe == Me.levelUpPlyr && me) { if (oe > 0) { if (a.x >= 100 && a.x < 250 && a.y >= 90 && a.y < 130 && player1.arcanePower < 5) { oe -= 1, player1.arcanePower = player1.arcanePower + 1; l = player1.arcanePower + "0.png"; soundOn && Ne.play(), setTimeout(function () { imgArray[0].src = "Images/HUD/spellLevelUp.png" }, 100), setTimeout(function () { imgArray[0].src = "Images/" + l }, 500) } if (a.x >= 323 && a.x < 400 && a.y >= 90 && a.y < 130 && player1.sparkPower < 5) { oe -= 1, player1.sparkPower = player1.sparkPower + 1; l = player1.sparkPower + "1.png"; soundOn && Ne.play(), setTimeout(function () { imgArray[1].src = "Images/HUD/spellLevelUp.png" }, 100), setTimeout(function () { imgArray[1].src = "Images/" + l }, 500) } if (a.x >= 100 && a.x < 250 && a.y >= 135 && a.y < 175 && player1.firePower < 5) { oe -= 1, player1.firePower = player1.firePower + 1; l = player1.firePower + "2.png"; soundOn && Ne.play(), setTimeout(function () { imgArray[2].src = "Images/HUD/spellLevelUp.png" }, 100), setTimeout(function () { imgArray[2].src = "Images/" + l }, 500) } if (a.x >= 323 && a.x < 400 && a.y >= 135 && a.y < 175 && player1.swordPower < 5) { oe -= 1, player1.swordPower = player1.swordPower + 1; l = player1.swordPower + "3.png"; soundOn && Ne.play(), setTimeout(function () { imgArray[3].src = "Images/HUD/spellLevelUp.png" }, 100), setTimeout(function () { imgArray[3].src = "Images/" + l }, 500) } if (a.x >= 100 && a.x < 250 && a.y >= 180 && a.y < 225 && player1.meteorPower < 5) { oe -= 1, player1.meteorPower = player1.meteorPower + 1; l = player1.meteorPower + "4.png"; soundOn && Ne.play(), setTimeout(function () { imgArray[4].src = "Images/HUD/spellLevelUp.png" }, 100), setTimeout(function () { imgArray[4].src = "Images/" + l }, 500) } if (a.x >= 323 && a.x < 400 && a.y >= 180 && a.y < 225 && player1.earthPower < 5) { oe -= 1, player1.earthPower = player1.earthPower + 1; l = player1.earthPower + "5.png"; soundOn && Ne.play(), setTimeout(function () { imgArray[5].src = "Images/HUD/spellLevelUp.png" }, 100), setTimeout(function () { imgArray[5].src = "Images/" + l }, 500) } if (a.x >= 218 && a.x < 300 && a.y >= 222 && a.y < 265 && player1.airPower < 5) { oe -= 1, player1.airPower = player1.airPower + 1; var l = player1.airPower + "6.png"; soundOn && Ne.play(), setTimeout(function () { imgArray[6].src = "Images/HUD/spellLevelUp.png" }, 100), setTimeout(function () { imgArray[6].src = "Images/" + l }, 500) } } if (se > 0) { if (a.x >= 100 && a.x < 260 && a.y >= 270 && a.y < 310) { soundOn && Ne.play(), se -= 1; var m = 10 * player1.playerLevel; player1.healthMax = player1.healthMax + m, player1.health = player1.healthMax } if (a.x >= 320 && a.x < 400 && a.y >= 270 && a.y < 310) { soundOn && Ne.play(), se -= 1; var o = 10 * player1.playerLevel; player1.defenseMax = player1.defenseMax + o, player1.defense = player1.defenseMax } } a.x >= 0 && a.x < 80 && a.y >= 250 && a.y <= 320 && (w(1), $ = 0, ne = 0, enemy.playerLevel = enemy.playerLevel + 1, W(enemy.playerLevel), enemy.health = enemy.healthMax, enemy.defense = enemy.defenseMax, enemy.defenseDrop = 0, enemy.damage = 0, showVS()) } if (xe == Me.almostOver && (a.x >= 110 && a.x < 220 && a.y >= 230 && a.y < 280 && (w(0), xe = Me.ready, gameOver = !1, ae = 0, ne = 0, resizeGame()), a.x >= 185 && a.x < 310 && a.y >= 545 && a.y < 591)) { if (!(localStorage.starCash >= 15)) return; starCash -= 15, localStorage.starCash = starCash, w(2), ee = !0, Pe = !1, ae = 0 } } function D(e) { fe = !1 } function F(e) { fe = !1 } function U(e, a) { var t = e.getBoundingClientRect(); return { x: Math.round((a.clientX - t.left) / (t.right - t.left) * e.width), y: Math.round((a.clientY - t.top) / (t.bottom - t.top) * e.height) } } function W(e) { var a = ""; a = enemies[enemy.playerLevel - 1]; var t = "Images/Enemy/lvl" + enemy.playerLevel + ".png"; document.getElementById("vsEnemy").src = t, enemy.name = a, enemyNameGlobal = a; var r = 0, n = 0; r = enemyStats["lvl" + e].health, n = enemyStats["lvl" + e].defense, enemy.healthMax = r, enemy.defenseMax = n } function N() { xe = Me.levelUp, _.pause(), gameSoundLoop.pause(), soundOn && Ue.play(), document.getElementById("message").style.display = "none", q = 1 } function G() { me = !0 } var z = document.getElementById("viewport1"); z.width = window.innerWidth, z.width > 565 && (z.width = 565), z.height = window.innerHeight, z.height > 310 && (z.height = 310), z.style.width = z.width.toString() + "px", z.style.height = z.height.toString() + "px"; var O = z.getContext("2d"); O.webkitImageSmoothingEnabled = !1, O.mozImageSmoothingEnabled = !1, O.imageSmoothingEnabled = !1; var _ = document.getElementById("gameSoundLoop"); _.volume = .3; var R = 0, V = 0, Y = 0, Z = 0, J = 2e3, X = 0, j = 1, q = 0, K = 0, Q = 0, $ = 0, ee = !1, ae = 0, te = !1, re = !1, ne = 0, le = !1, me = !1, oe = 0, se = 0, ye = !1, ie = !1, ge = 0, de = 0, ce = 10, pe = !0, ue = [["arcanePower"], ["sparkPower"], ["firePower"], ["swordPower"], ["meteorPower"], ["earthPower"], ["airPower"]], he = 0, fe = !1, Ie = { x: 63, y: 35, columns: 9, rows: 5, tilewidth: 49, tileheight: 49, tiles: [], tileImage: [], selectedtile: { selected: !1, column: 0, row: 0 } }; window.addEventListener("resize", resizeGame(), !1), window.addEventListener("orientationchange", resizeGame(), !1); var we, ve = [[255, 128, 128, 0], [128, 255, 128, 1], [128, 128, 255, 2], [255, 255, 128, 3], [255, 128, 255, 4], [128, 255, 255, 5], [255, 255, 255, 6]], Ae = [], Ee = [], Se = { column1: 0, row1: 0, column2: 0, row2: 0 }, Me = { init: 0, ready: 1, resolve: 2, levelUp: 3, almostOver: 4, aiTurn: 5, levelUpPlyr: 6 }, xe = Me.init, Be = 0, ke = 0, Le = 0, Te = .9, be = !1; a(); var He = !1, Ce = 0, Pe = !1; n(); var De = 1; setInterval(function () { 1 == newGameLoad && (ne = 0, newGameLoad = 0, enemyHeal = !0), ++ne, O.fillStyle = "#ffff00", O.font = "22px Comic Sans MS" }, 2e3); var Fe = new Howl({ src: ["Sounds/gametinywarp.mp3"], volume: .5, preload: !0 }); Fe.play(); var Ue = new Howl({ src: ["Sounds/victory_fanfare.mp3"], volume: .9, preload: !0 }); Ue.play(); var We = new Howl({ src: ["Sounds/Evil_laugh.mp3"], volume: .9, preload: !0 }); We.play(); var Ne = new Howl({ src: ["Sounds/spellUp.mp3"], volume: .9, preload: !0 }); Ne.play(); var Ge = [{ x: 130, y: 285, width: 50, height: 35, text: "New" }, { x: 390, y: 285, width: 50, height: 35, text: "Next" }]; !function () { z.addEventListener("mousemove", C), z.addEventListener("mousedown", P), z.addEventListener("mouseup", D), z.addEventListener("mouseout", F), document.addEventListener("touchstart", e, !0), document.addEventListener("touchmove", e, !0), document.addEventListener("touchend", e, !0), document.addEventListener("touchcancel", e, !0); for (var a = 0; a < Ie.columns; a++) { Ie.tiles[a] = []; for (var t = 0; t < Ie.rows; t++)Ie.tiles[a][t] = { type: 0, shift: 0 } } w(), ne = 0, m(0) }() } function clkBoostPotion(e) { var a = 0, t = 0; if (1 == e && player1.health < player1.healthMax) { starCash -= 25, localStorage.starCash = starCash, a = player1.healthMax / 2, document.getElementById("healHeart").style.display = "block"; setTimeout(function () { document.getElementById("healHeart").style.display = "none", player1.health = player1.health + a, player1.health > player1.healthMax && (player1.health = player1.healthMax) }, 2500) } 2 == e && (starCash -= 25, localStorage.starCash = starCash, playerClusterCount = 7), 3 == e && (starCash -= 25, localStorage.starCash = starCash, t = player1.defenseMax - player1.defense, player1.defenseMax = player1.defenseMax + 50, player1.defense = player1.defenseMax - t, player1.defense > player1.defenseMax && (player1.defense = player1.defenseMax)) } function hideIntro() { document.getElementById("landingCover").style.display = "none", newGameLoad = 1, newGame(0) } function resizeGame() { var e = document.getElementById("viewport1"), a = window.innerWidth - 10; a > 900 && (a = 900); var t = window.innerHeight - 10; t > 619 && (t = 620), a / t > 1.775 ? (e.style.height = t + "px", a = 1.775 * t, e.style.width = a + "px") : (e.style.width = a + "px", t = a / 1.775, e.style.height = t + "px"), e.style.marginTop = -t / 2 + "px", console.log(-t / 2), e.style.marginLeft = -a / 2 + "px" } function hideTitlePage(e) { if (1 == e && (loadGameSM(), document.getElementById("helpGif").style.display = "block", document.getElementById("skipMe").style.display = "block"), 2 == e) { player1 = JSON.parse(localStorage.getItem("spellMatch_Player")), enemy = JSON.parse(localStorage.getItem("spellMatch_Enemy")), cupWon = localStorage.getItem("spellMatch_cupWon"); var a = ""; a = enemies[enemy.playerLevel - 1]; var t = "Images/Enemy/lvl" + enemy.playerLevel + ".png"; document.getElementById("vsEnemy").src = t, enemy.name = a, enemyNameGlobal = a, document.getElementById("titleCover").style.display = "none", document.getElementById("helpGif").style.display = "none", document.getElementById("coverWrapper").style.display = "block", showVS(); var r = ""; console.table(player1), player1.arcanePower > 1 && (r = player1.arcanePower + "0.png", imgArray[0].src = "Images/" + r), player1.sparkPower > 1 && (r = player1.sparkPower + "1.png", imgArray[1].src = "Images/" + r), player1.firePower > 1 && (r = player1.firePower + "2.png", imgArray[2].src = "Images/" + r), player1.swordPower > 1 && (r = player1.swordPower + "3.png", imgArray[3].src = "Images/" + r), player1.meteorPower > 1 && (r = player1.meteorPower + "4.png", imgArray[4].src = "Images/" + r), player1.earthPower > 1 && (r = player1.earthPower + "5.png", imgArray[5].src = "Images/" + r), player1.airPower > 1 && (r = player1.airPower + "6.png", imgArray[6].src = "Images/" + r) } } function showVS() { document.getElementById("titleCover").style.display = "none", document.getElementById("helpGif").style.display = "none", document.getElementById("skipMe").style.display = "none", document.getElementById("coverWrapper").style.display = "block", document.getElementById("vsCover").style.display = "block", document.getElementById("goHome").style.display = "none", document.getElementById("playerNameP").innerHTML = playerNameGlobal, document.getElementById("enemyNameP").innerHTML = enemyNameGlobal, document.getElementById("countDown").innerHTML = " "; var e = 4, a = setInterval(function () { e -= 1, document.getElementById("countDown").innerHTML = e, 0 == e && (document.getElementById("countDown").innerHTML = "Go"), e <= 0 && clearInterval(a) }, 1e3); setTimeout(function () { document.getElementById("vsCover").style.display = "none", document.getElementById("coverWrapper").style.display = "none", document.getElementById("goHome").style.display = "none", document.getElementById("difficulty").style.display = "none" }, 5e3) } function read_prop(e, a) { return e[a] } function changeDifficulty(e) { difficulty = e; selectAdjust = 2 == e ? "47%" : 3 == e ? "65%" : "30%", document.getElementById("selectedDiff").style.top = selectAdjust } function saveDifficulty() { document.getElementById("difficulty").style.display = "none" } function homeSave() { document.getElementById("goHome").style.display = "none", localStorage.setItem("spellMatch_Player", JSON.stringify(player1)), localStorage.setItem("spellMatch_Enemy", JSON.stringify(enemy)), localStorage.setItem("spellMatch_cupWon", cupWon); localStorage.getItem("spellMatch_Player") } function gameReturn1() { document.getElementById("goHome").style.display = "none", document.getElementById("inventoryParent").style.display = "none", document.getElementById("trophyParent").style.display = "none", document.getElementById("playerStatsParent").style.display = "none", selectedCup = 0 } function swapEnemyStatsView(e) { cupWon = localStorage.getItem("spellMatch_cupWon"); var a = enemyStats["lvl" + e].name, t = "url('Images/Enemy/lvl" + e + ".png')"; cupWon >= 1 && 1 == selectedCup && (e += 13), 2 == cupWon && 2 == selectedCup && (e += 27), document.getElementById("enemyNameCenter").innerHTML = a, document.getElementById("innerStat1").innerHTML = enemyStats["lvl" + e].health, document.getElementById("innerStat3").innerHTML = enemyStats["lvl" + e].defense, document.getElementById("innerStory").innerHTML = enemyStats["lvl" + e].story, document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = t, 0 == selectedCup && (document.getElementById("r5-c2").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("r5-c3").style.backgroundImage = "url('Images/buttons/goldLock.png')", e >= 14 && (document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("enemyNameCenter").innerHTML = lockedName, document.getElementById("innerStat1").innerHTML = lockedStat1, document.getElementById("innerStat3").innerHTML = lockedStat2, document.getElementById("innerStory").innerHTML = lockedStory, 15 == e && (document.getElementById("enemyNameCenter").innerHTML = lockedName2))), 1 == cupWon && 1 == selectedCup && (document.getElementById("r5-c2").style.backgroundImage = "url('Images/Enemy/lvl27.png')"), 2 == cupWon && 3 == selectedCup && (document.getElementById("r5-c2").style.backgroundImage = "url('Images/Enemy/lvl27.png')", document.getElementById("r5-c3").style.backgroundImage = "url('Images/Enemy/lvl42.png')"), 1 == cupWon && 27 == e && 1 == selectedCup && (document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = "url('Images/Enemy/lvl27.png')", document.getElementById("r5-c2").style.backgroundImage = "url('Images/Enemy/lvl27.png')", document.getElementById("r5-c3").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("enemyNameCenter").innerHTML = a, document.getElementById("innerStat1").innerHTML = enemyStats["lvl" + e].health, document.getElementById("innerStat3").innerHTML = enemyStats["lvl" + e].defense, document.getElementById("innerStory").innerHTML = enemyStats["lvl" + e].story, document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = t), cupWon > 1 && 42 == e && 2 == selectedCup && (document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = "url('Images/Enemy/lvl42.png')", document.getElementById("r5-c3").style.backgroundImage = "url('Images/Enemy/lvl42.png')", document.getElementById("enemyNameCenter").innerHTML = a, document.getElementById("innerStat1").innerHTML = enemyStats["lvl" + e].health, document.getElementById("innerStat3").innerHTML = enemyStats["lvl" + e].defense, document.getElementById("innerStory").innerHTML = enemyStats["lvl" + e].story, document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = t) } function hideCountDown() { document.getElementById("coverWrapper").style.display = "none" } function selectCup(e) { 0 == (selectedCup = e) && (document.getElementById("r5-c3").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("r5-c3").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("cupGuiName").innerHTML = "Bronze Cup", document.getElementById("trophyLock3").style.display = "none"), 1 == selectedCup && (document.getElementById("r5-c3").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("cupGuiName").innerHTML = "Silver Cup", document.getElementById("trophyLock3").style.display = "none"), 3 == selectedCup && (document.getElementById("cupGuiName").innerHTML = "Gold Cup", document.getElementById("trophyLock3").style.display = "none"), 2 == selectedCup && (document.getElementById("cupGuiName").innerHTML = "Star Tracking", document.getElementById("trophyLock3").style.display = "none"), swapEnemyStatsView(1), 4 == selectedCup && (document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("cupGuiName").innerHTML = "Win Bronze tournament to unlock", document.getElementById("trophyLock3").style.display = "block", document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("enemyNameCenter").innerHTML = lockedName, document.getElementById("innerStat1").innerHTML = lockedStat1, document.getElementById("innerStat3").innerHTML = lockedStat2, document.getElementById("innerStory").innerHTML = lockedStory), 5 == selectedCup && (document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("cupGuiName").innerHTML = "Win Silver tournament to unlock", document.getElementById("trophyLock3").style.display = "block", document.getElementById("centerTrophyMiddleLeft").style.backgroundImage = "url('Images/buttons/goldLock.png')", document.getElementById("enemyNameCenter").innerHTML = lockedName2, document.getElementById("innerStat1").innerHTML = lockedStat1, document.getElementById("innerStat3").innerHTML = lockedStat2, document.getElementById("innerStory").innerHTML = lockedStory) } function updateStats() { document.getElementById("healthInnerStat").innerHTML = player1.health, document.getElementById("defInnerStat").innerHTML = player1.defense, document.getElementById("playerLevelTitle").innerHTML = "Level " + player1.playerLevel; var e = localStorage.getItem("spellMatch_cupWon"); document.getElementById("playerCupStats").style.backgroundImage = "url('Images/Hero/trophy" + e + ".png')", document.getElementById("starCashStat").innerHTML = starCash, document.getElementById("arcaneStatVal").innerHTML = player1.arcanePower, document.getElementById("sparkStatVal").innerHTML = player1.sparkPower, document.getElementById("fireStatVal").innerHTML = player1.firePower, document.getElementById("swordStatVal").innerHTML = player1.swordPower, document.getElementById("meteorStatVal").innerHTML = player1.meteorPower, document.getElementById("earthStatVal").innerHTML = player1.earthPower, document.getElementById("airStatVal").innerHTML = player1.airPower } var newGameLoad = 0, enemyNameGlobal = "Arcannus", playerNameGlobal = "GuiMage", difficulty = 1, cupWon = 0, selectedCup = 0, lockedStat1 = "???", lockedStat2 = "???", lockedName = "Silver Cup Champ", lockedName2 = "Gold Cup Champ", lockedStory = "Win the tournament to unlock", playerClusterCount = 0, enemyClusterCount = 0, animTimer, animTimer2, enemyHeal = !0, soundOn = !0, enemies = ["Arcannus", "ElfWiz", "ArticMage", "Acidious", "Blazaron", "Sylvana", "Toxigam", "HarmBringer", "Invertus", "DeathMage", "Milfohim", "Zerlin", "Yisenda", "Arcannus", "ElfWiz", "ArticMage", "Acidious", "Blazaron", "Sylvana", "Toxigam", "HarmBringer", "Invertus", "DeathMage", "Milfohim", "Zerlin", "Yisenda", "Firetta", "Arcannus", "ElfWiz", "ArticMage", "Acidious", "Blazaron", "Sylvana", "Toxigam", "HarmBringer", "Invertus", "DeathMage", "Milfohim", "Zerlin", "Yisenda", "Firetta", "Magentra", "Undadish"], enemyStats = { lvl1: { name: "Arcannus", health: 100, defense: 100, status: 0, story: "Lives in a volcano, apprentice of Blazaron." }, lvl2: { name: "ElfWiz", health: 150, defense: 150, status: 0, story: "Apprentice of Yisenda, from elven Caras Galadhon" }, lvl3: { name: "ArticMage", health: 200, defense: 200, status: 0, story: "From the far north; cold hearted power." }, lvl4: { name: "Acidious", health: 250, defense: 250, status: 0, story: "Some people say he is a bitter man!" }, lvl5: { name: "Blazaron", health: 300, defense: 300, status: 0, story: "Expert at Fire attacks, master of Arcannus" }, lvl6: { name: "Sylvana", health: 350, defense: 350, status: 0, story: "She studies to harness the power of crystals" }, lvl7: { name: "Toxigam", health: 400, defense: 400, status: 0, story: "Alchemy and gases consume him" }, lvl8: { name: "Harmion", health: 450, defense: 450, status: 0, story: "Focused on pain of others; not a nice guy!" }, lvl9: { name: "Invertus", health: 500, defense: 500, status: 0, story: "Master of the negative dimension" }, lvl10: { name: "DeathMage", health: 550, defense: 500, status: 0, story: "Battle Master of the dark arts" }, lvl11: { name: "Milfohim", health: 600, defense: 500, status: 0, story: "Wise Headmaster of the Mage school" }, lvl12: { name: "Zerlin", health: 650, defense: 500, status: 0, story: "Ancient mage of legend, master of many arts" }, lvl13: { name: "Yisenda", health: 700, defense: 500, status: 0, story: "Elven princess of poweful light magic" }, lvl14: { name: "Arcannus", health: 1100, defense: 1100, status: 0, story: "Back for more " }, lvl15: { name: "ElfWiz", health: 1150, defense: 1150, status: 0, story: "Apprentice of Yisenda, from elven Caras Galadhon" }, lvl16: { name: "ArticMage", health: 1200, defense: 1200, status: 0, story: "From the far north; cold hearted power." }, lvl17: { name: "Acidious", health: 1250, defense: 1250, status: 0, story: "Some people say he is a bitter man!" }, lvl18: { name: "Blazaron", health: 1300, defense: 1300, status: 0, story: "Expert at Fire attacks, master of Arcannus" }, lvl19: { name: "Sylvana", health: 1350, defense: 1350, status: 0, story: "She studies to harness the power of crystals" }, lvl20: { name: "Toxigam", health: 1400, defense: 1400, status: 0, story: "Alchemy and gases consume him" }, lvl21: { name: "Harmion", health: 1450, defense: 1450, status: 0, story: "Focused on pain of others; not a nice guy!" }, lvl22: { name: "Invertus", health: 1500, defense: 1500, status: 0, story: "Master of the negative dimension" }, lvl23: { name: "DeathMage", health: 1550, defense: 1500, status: 0, story: "Battle Master of the dark arts" }, lvl24: { name: "Milfohim", health: 1600, defense: 1500, status: 0, story: "Wise Headmaster of the Mage school" }, lvl25: { name: "Zerlin", health: 1650, defense: 1500, status: 0, story: "Ancient mage of legend, master of many arts" }, lvl26: { name: "Yisenda", health: 1700, defense: 1500, status: 0, story: "Elven princess of poweful light magic" }, lvl27: { name: "Firetta", health: 1850, defense: 1500, status: 0, story: "Demon raised by Blazaron from the 9 hells" }, lvl28: { name: "Arcannus", health: 2100, defense: 2100, status: 0, story: "Lives in a volcano, apprentice of Blazaron." }, lvl29: { name: "ElfWiz", health: 2150, defense: 2150, status: 0, story: "Apprentice of Yisenda, from elven Caras Galadhon" }, lvl30: { name: "ArticMage", health: 2200, defense: 2200, status: 0, story: "From the far north; cold hearted power." }, lvl31: { name: "Acidious", health: 2250, defense: 2250, status: 0, story: "Some people say he is a bitter man!" }, lvl32: { name: "Blazaron", health: 2300, defense: 2300, status: 0, story: "Expert at Fire attacks, master of Arcannus" }, lvl33: { name: "Sylvana", health: 2350, defense: 2350, status: 0, story: "She studies to harness the power of crystals" }, lvl34: { name: "Toxigam", health: 2400, defense: 2400, status: 0, story: "Alchemy and gases consume him" }, lvl35: { name: "Harmion", health: 2450, defense: 2450, status: 0, story: "Focused on pain of others; not a nice guy!" }, lvl36: { name: "Invertus", health: 2500, defense: 2500, status: 0, story: "Master of the negative dimension" }, lvl37: { name: "DeathMage", health: 2550, defense: 2500, status: 0, story: "Battle Master of the dark arts" }, lvl38: { name: "Milfohim", health: 2600, defense: 2500, status: 0, story: "Wise Headmaster of the Mage school" }, lvl39: { name: "Zerlin", health: 2650, defense: 2500, status: 0, story: "Ancient mage of legend, master of many arts" }, lvl40: { name: "Yisenda", health: 2700, defense: 2500, status: 0, story: "Elven princess of poweful light magic" }, lvl41: { name: "Firetta", health: 2850, defense: 2500, status: 0, story: "Demon raised by Blazaron from the 9 hells" }, lvl42: { name: "Magentra", health: 3e3, defense: 2500, status: 0, story: "Evil Mastermind bent on world domination" }, lvl43: { name: "Malfibo", health: 4e3, defense: 3500, status: 0, story: "The secret evil summoner behind the tournament" } }, player1 = { health: 100, healthMax: 100, damage: 0, defense: 100, defenseMax: 100, defenseDrop: 0, power: 100, playerLevel: 1, firePower: 1, earthPower: 1, airPower: 1, arcanePower: 1, swordPower: 1, meteorPower: 1, sparkPower: 1, name: "GuiMage" }, enemy = { health: 100, healthMax: 100, damage: 0, defense: 100, defenseMax: 100, defenseDrop: 0, power: 100, playerLevel: 1, firePower: 1, earthPower: 1, windPower: 1, mysticPower: 1, name: "Arcanus" }, starCash = 0; void 0 === localStorage.starCash && (localStorage.starCash = 0, starCash = 0), starCash = parseInt(localStorage.starCash), void 0 === localStorage.spellMatch_cupWon && (localStorage.spellMatch_cupWon = 0, cupWon = 0), cupWon = parseInt(localStorage.spellMatch_cupWon), void 0 === localStorage.spellMatch_Player && (document.getElementById("btnImage2").style.display = "none", document.getElementById("btn2Text").style.display = "none"); var imgArray = new Array; imgArray[0] = new Image, imgArray[0].src = "Images/0.png", imgArray[1] = new Image, imgArray[1].src = "Images/1.png", imgArray[2] = new Image, imgArray[2].src = "Images/2.png", imgArray[3] = new Image, imgArray[3].src = "Images/3.png", imgArray[4] = new Image, imgArray[4].src = "Images/4.png", imgArray[5] = new Image, imgArray[5].src = "Images/5.png", imgArray[6] = new Image, imgArray[6].src = "Images/6.png", imgArray[7] = new Image, imgArray[7].src = "Images/7.png", imgArray[8] = new Image, imgArray[8].src = "Images/8.png", imgArray[9] = new Image, imgArray[9].src = "Images/9.png"; var imgArray2 = new Array; imgArray2[0] = new Image, imgArray2[0].src = "Images/gabbyLogo.png", imgArray2[1] = new Image, imgArray2[1].src = "Images/HUD/levelUp1.png", imgArray2[2] = new Image, imgArray2[2].src = "Images/starCashBack.png", imgArray2[3] = new Image, imgArray2[3].src = "Images/bigButton.png", imgArray2[4] = new Image, imgArray2[4].src = "Images/star.png", imgArray2[5] = new Image, imgArray2[5].src = "Images/3rdStar.png", imgArray2[6] = new Image, imgArray2[6].src = "Images/hudLevel.png", imgArray2[7] = new Image, imgArray2[7].src = "Images/HUD/loss.png", imgArray2[8] = new Image, imgArray2[8].src = "Images/HUD/newGame.png", imgArray2[9] = new Image, imgArray2[9].src = "Images/HUD/buyNow.png", imgArray2[10] = new Image, imgArray2[10].src = "Images/HUD/levelBonus.png", imgArray2[11] = new Image, imgArray2[11].src = "Images/HUD/awesome2.gif", imgArray2[12] = new Image, imgArray2[12].src = "Images/HUD/levelUp1.png", imgArray2[13] = new Image, imgArray2[13].src = "Images/Hero/idle_1.png", imgArray2[14] = new Image, imgArray2[14].src = "Images/HUD/healthContainer.png", imgArray2[15] = new Image, imgArray2[15].src = "Images/HUD/healthBar.png", imgArray2[16] = new Image, imgArray2[16].src = "Images/HUD/defenseContainer.png", imgArray2[17] = new Image, imgArray2[17].src = "Images/HUD/defenseBar2.png", imgArray2[18] = new Image, imgArray2[18].src = "Images/Enemy/lvl1.png", imgArray2[19] = new Image, imgArray2[19].src = "Images/HUD/bottomBar.png", imgArray2[20] = new Image, imgArray2[20].src = "Images/HUD/powerBack.png", imgArray2[21] = new Image, imgArray2[21].src = "Images/HUD/powerBackEnemy.png", imgArray2[22] = new Image, imgArray2[22].src = "Images/HUD/powerInnerBar.png", imgArray2[23] = new Image, imgArray2[23].src = "Images/HUD/bronzeTrophyWon.png", imgArray2[24] = new Image, imgArray2[24].src = "Images/HUD/silverTrophyWon.png", imgArray2[25] = new Image, imgArray2[25].src = "Images/HUD/goldTrophyWon.png"; var imgArray3 = new Array; imgArray3[0] = new Image, imgArray3[0].src = "Images/buttons/greyGear.png", imgArray3[1] = new Image, imgArray3[1].src = "Images/buttons/greenHouse.png", imgArray3[2] = new Image, imgArray3[2].src = "Images/buttons/greySound.png", imgArray3[3] = new Image, imgArray3[3].src = "Images/buttons/greyMenu.png", imgArray3[4] = new Image, imgArray3[4].src = "Images/buttons/greenTrophy.png", imgArray3[5] = new Image, imgArray3[5].src = "Images/buttons/greyThumbUp.png", imgArray3[6] = new Image, imgArray3[6].src = "Images/HUD/HorizLevelUp.png", imgArray3[7] = new Image, imgArray3[7].src = "Images/HUD/ButtonPlus.png", imgArray3[8] = new Image, imgArray3[8].src = "Images/HUD/darkGreenSave.png", imgArray3[9] = new Image, imgArray3[9].src = "Images/HUD/spellLevelUp.png", imgArray4 = new Array, imgArray4[0] = new Image, imgArray4[0].src = "Images/Enemy/lvl1.png", imgArray4[1] = new Image, imgArray4[1].src = "Images/Enemy/lvl2.png", imgArray4[2] = new Image, imgArray4[2].src = "Images/Enemy/lvl3.png", imgArray4[3] = new Image, imgArray4[3].src = "Images/Enemy/lvl4.png", imgArray4[4] = new Image, imgArray4[4].src = "Images/Enemy/lvl5.png", imgArray4[5] = new Image, imgArray4[5].src = "Images/Enemy/lvl6.png", imgArray4[6] = new Image, imgArray4[6].src = "Images/Enemy/lvl7.png", imgArray4[7] = new Image, imgArray4[7].src = "Images/Enemy/lvl8.png", imgArray4[8] = new Image, imgArray4[8].src = "Images/Enemy/lvl9.png", imgArray4[9] = new Image, imgArray4[9].src = "Images/Enemy/lvl10.png", imgArray4[10] = new Image, imgArray4[10].src = "Images/Enemy/lvl11.png", imgArray4[11] = new Image, imgArray4[11].src = "Images/Enemy/lvl12.png", imgArray4[12] = new Image, imgArray4[12].src = "Images/Enemy/lvl13.png", imgArray4[13] = new Image, imgArray4[13].src = "Images/Enemy/lvl14.png", imgArray4[14] = new Image, imgArray4[14].src = "Images/Enemy/lvl15.png", imgArray4[15] = new Image, imgArray4[15].src = "Images/Enemy/lvl16.png", imgArray4[16] = new Image, imgArray4[16].src = "Images/Enemy/lvl17.png", imgArray4[17] = new Image, imgArray4[17].src = "Images/Enemy/lvl18.png", imgArray4[18] = new Image, imgArray4[18].src = "Images/Enemy/lvl19.png", imgArray4[19] = new Image, imgArray4[19].src = "Images/Enemy/lvl20.png", imgArray4[20] = new Image, imgArray4[20].src = "Images/Enemy/lvl21.png", imgArray4[21] = new Image, imgArray4[21].src = "Images/Enemy/lvl22.png", imgArray4[22] = new Image, imgArray4[22].src = "Images/Enemy/lvl23.png", imgArray4[23] = new Image, imgArray4[23].src = "Images/Enemy/lvl24.png", imgArray4[24] = new Image, imgArray4[24].src = "Images/Enemy/lvl25.png", imgArray4[25] = new Image, imgArray4[25].src = "Images/Enemy/lvl26.png", imgArray4[26] = new Image, imgArray4[26].src = "Images/Enemy/lvl27.png", imgArray4[27] = new Image, imgArray4[27].src = "Images/Enemy/lvl28.png", imgArray4[28] = new Image, imgArray4[28].src = "Images/Enemy/lvl29.png", imgArray4[29] = new Image, imgArray4[29].src = "Images/Enemy/lvl30.png", imgArray4[30] = new Image, imgArray4[30].src = "Images/Enemy/lvl31.png", imgArray4[31] = new Image, imgArray4[31].src = "Images/Enemy/lvl32.png", imgArray4[32] = new Image, imgArray4[32].src = "Images/Enemy/lvl33.png", imgArray4[33] = new Image, imgArray4[33].src = "Images/Enemy/lvl34.png", imgArray4[34] = new Image, imgArray4[34].src = "Images/Enemy/lvl35.png", imgArray4[35] = new Image, imgArray4[35].src = "Images/Enemy/lvl36.png", imgArray4[36] = new Image, imgArray4[36].src = "Images/Enemy/lvl37.png", imgArray4[37] = new Image, imgArray4[37].src = "Images/Enemy/lvl38.png", imgArray4[38] = new Image, imgArray4[38].src = "Images/Enemy/lvl39.png", imgArray4[39] = new Image, imgArray4[39].src = "Images/Enemy/lvl40.png", imgArray4[40] = new Image, imgArray4[40].src = "Images/Enemy/lvl41.png", imgArray4[41] = new Image, imgArray4[41].src = "Images/Enemy/lvl42.png", imgArray4[42] = new Image, imgArray4[42].src = "Images/Enemy/lvl43.png";