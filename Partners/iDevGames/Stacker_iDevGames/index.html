<!DOCTYPE html>
<!--GuiGhost Games - GuiStack- Tower of Balance-->
<!--GuiGhost Games - GuiStack v1.2 March 2018-->


<html>
<head>
    <title>Stacker - Boxes of Balance</title>
    <meta name="viewport" content="width = device-width, initial-scale = 1.0, maximum-scale = 1.0, minimum-scale = 1.0, user-scalable = no, minimal-ui" />
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta property="og:url" content="https://guighostgames.com/Stacker-BoxesOfBalance/index.html" />
    <meta property="og:type" content="game" />
    <meta property="og:title" content="Stacker: Boxes of Balance" />
    <meta property="og:description" content="Fun Physics games of box dropping to get the high score, but don't let them fall -  Family Friendly Free Online Game" />
    <meta property="og:image" content="https://guighostgames.com/Images/Homepage/guiStack1.2.png" />

    <link rel="shortcut icon" sizes="256x256" href="assets/sprites/crate16.png" />
    
    

    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
        }

        body {
            background: #0259a0;
            background: url("images/bg.png") center fixed;
            background-size: contain;
            background-repeat: no-repeat;
            background-color: black;
        }

        canvas {
            touch-action: none;
            -ms-touch-action: none;
           
        }

        #wrongorientation {
            background: url("images/wrongorientation.png") no-repeat center center fixed;
            background-size: contain;
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            display: none;
        }

        #gameDiv{
            width:100%;
           

        }
        #selfInterstatial{
            position:absolute;
            top: 0px;
            left: 0px;
            width: 100%;
            height: 99%;
            background-color: black;
            /*background-image:url("images/selfPromoteBack2.png");*/
            background-size: cover;
            background-repeat: no-repeat;
            z-index: 3000;
            display: none;
        }
        #selfAdInner {
            position: absolute;
            top: 1%;
            /*left: 5%;*/
            width: 100%;
            height: 58%;
            /*background-color: red;*/
            background-size: cover;
            background-repeat: no-repeat;
            z-index: 3000;
        }
        #selfAdGraphic {
            width: 100%;
            background-image: url("images/starMatchPromo1.png");
            background-size: contain;
            background-repeat: no-repeat;
            display: none;
        }
        #promoVid1 {
            position: absolute;
            top: 50px;
            left: 0px;
            width: 100%;
            z-index: 1900;
         
        }
        #gameLink {
            position: absolute;
            left: 50%;
            bottom: 15%;
            width: 232px;
            height: 79px;
            transform: translateX(-115px);
            z-index: 2000;
        }
        #gPlayImg {
            display: inline-block;
            width: 300px;
            margin-left: 50%;
            transform: translate(-150px,-30px);
            z-index: 2000;
        }
        #labelSelfInter {
            position: absolute;
            width: 80%;
            top: 5px;
            left: 5%;
            background-color: CaptionText;
            font-family: 'Comic Sans MS';
            font-size: large;
            color: azure;
            text-align: center;
            border: 1px solid grey;
        }
        #adTimerX {
            position: absolute;
            width: 22px;
            height: 22px;
            top: 5px;
            right: 15px;
            background-color: lightgray;
            border: 1px double blue;
            border-radius: 15px;
            font-size: 18px;
            font-family: 'Comic Sans MS';
            align-content: center;
            padding-left: 5px;
            padding-right: 3px;
            z-index: 3500;
        }

        

     

        #gGlogoMenu {
            background: url("images/gabbyLogo.png");
            background-repeat: no-repeat;
            background-size: contain;
            background-position: center;
        }
       
        #loadingGG {
            position: absolute;
            top: 25%;
            left: 50%;
            min-width: 200px;
            height: 60%;
            transform: translateX(-150px);
            z-index: 15000;
        }


        /*/////rate me*/
        #rateMe {
            position: absolute;
            min-height: 100%;
            min-width: 100%;
            background-color: black;
            background-image: url("images/selfPromoteBack2.png");
            background-position: top;
            background-repeat: no-repeat;
            background-size: contain;
            z-index: 1000;
            /*min-width: 400px;
            max-width: 500px;
            max-height: 400px;*/
            align-content: center;
            text-align: center;
            font-family: 'Comic Sans MS';
            font-size: 16px;
            color: azure;
            text-shadow: 2px 2px #101511;
            display: none;
            top:0px;
        }

        #rateMeInner {
            position: absolute;
            background-image: linear-gradient(grey,ActiveCaption);
            top: 30%;
            margin-left: 50%;
            height: 210px;
            width: 312px;
            border: 5px grey groove;
            transform: translate(-161px,25px);
            z-index: 1100;
            display: none;
        }

        #rateMeBtnWrap {
            position: absolute;
            bottom: 5px;
            width: 100%;
            left: 0px;
        }

        .rateBtn {
            float: left;
            width: 26%;
            height: 32px;
            background-image: linear-gradient(forestGreen,#17BF39 );
            border: 5px groove green;
            border-radius: 5px;
            align-content: center;
            text-align: center;
            margin: 2%;
            font-family: 'Comic Sans MS';
            font-size: 15px;
            text-shadow: 1px 1px black;
            color: azure;
            padding-top: 3px;
            /*margin-left: 5%;*/
        }

        #rateImage {
            background-image: linear-gradient(lightcoral,yellow );
            margin-top: 4%;
            display: inline-block;
            width: 300px;
            margin-left: 50%;
            transform: translate(-150px,-5px);
            z-index: 2000;
            border-radius: 10px;
        }

        #rateMeBtnNo {
            background-image: linear-gradient(red,lightcoral );
            margin-top: 4%;
        }

        #rateMeBtnLater {
            background-image: linear-gradient(blue, #149EB7);
            margin-top: 4%;
        }

        #rateMeBtnYes {
            padding-top: 9px;
            height: 45px;
            margin-top: 3%;
            font-size: 16px;
        }
        #leftAdBar {
            position: absolute;
            left: 0px;
            top: 0px;
            width: 130px;
            height: 99%;
            background-color: lightcyan;
            z-index: 3000;
        }

        #rightAdBar {
            position: absolute;
            right: 1px;
            top: 0px;
            width: 130px;
            height: 99%;
            background-color: lightcyan;
            z-index: 3000;
        }

        @media (max-width: 64em) {
            #rightAdBar {
                display: none;
            }

            #leftAdBar {
                display: none;
            }
        }

        @-webkit-keyframes heartBeat {
            0% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }

            14% {
                -webkit-transform: scale(1.3);
                transform: scale(1.3);
            }

            28% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }

            42% {
                -webkit-transform: scale(1.3);
                transform: scale(1.3);
            }

            70% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }
        }

        @keyframes heartBeat {
            0% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }

            14% {
                -webkit-transform: scale(1.3);
                transform: scale(1.3);
            }

            28% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }

            42% {
                -webkit-transform: scale(1.3);
                transform: scale(1.3);
            }

            70% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }
        }

        .heartBeat {
            -webkit-animation-name: heartBeat;
            animation-name: heartBeat;
            -webkit-animation-duration: 1.3s;
            animation-duration: 1.3s;
            -webkit-animation-timing-function: ease-in-out;
            animation-timing-function: ease-in-out;
        }

        @-webkit-keyframes zoomInRight {
            from {
                opacity: 0;
                -webkit-transform: scale3d(0.1, 0.1, 0.1) translate3d(1000px, 0, 0);
                transform: scale3d(0.1, 0.1, 0.1) translate3d(1000px, 0, 0);
                -webkit-animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
                animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
            }

            60% {
                opacity: 1;
                -webkit-transform: scale3d(0.475, 0.475, 0.475) translate3d(-10px, 0, 0);
                transform: scale3d(0.475, 0.475, 0.475) translate3d(-10px, 0, 0);
                -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
                animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
            }
        }

        @keyframes zoomInRight {
            from {
                opacity: 0;
                -webkit-transform: scale3d(0.1, 0.1, 0.1) translate3d(1000px, 0, 0);
                transform: scale3d(0.1, 0.1, 0.1) translate3d(1000px, 0, 0);
                -webkit-animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
                animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
            }

            60% {
                opacity: 1;
                -webkit-transform: scale3d(0.475, 0.475, 0.475) translate3d(-10px, 0, 0);
                transform: scale3d(0.475, 0.475, 0.475) translate3d(-10px, 0, 0);
                -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
                animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
            }
        }

        .zoomInRight {
            -webkit-animation-name: zoomInRight;
            animation-name: zoomInRight;
        }
        #levelComplete {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 5000;
            top: 0x;
            background-color: black;
            overflow: hidden;
            display:none;
        }
        #levelCompleteInner {
          
            margin: auto;
            width: 95%;
            height: 95%;
            z-index: 5000;
        
            text-align: center;
            font-family: 'Comic Sans MS';
            color: azure;
        }
      
        #bannerImg {
        width:100%;
        } 
        #LevelComleteTextDiv {
            margin: auto;
            width: 95%;
            height: 100%;
            font-family: 'Comic Sans MS';
            font-size: xx-large;
        }
        #goalText{
    margin-top: 2%;
    }

        .rowBackFail {
            width: 100%;
            height: 12%;
            margin: auto;
            float: left;
            margin-top: 5px;
            margin-bottom: 25px;
            font-size: xx-large;
            
        }
        h4 {
            background-image: radial-gradient( grey, black);
        }
        #goalHtml {
            background-image: radial-gradient( green, black);
        }
        .rowBackFail2 {
            width: 80%;
            height: 10%;
            margin-left: 10%;
            float: left;
            margin-top: 5px;
            margin-bottom: 12px;
            font-size: xx-large;
            /*border: 3px grey groove;*/
            background-image: radial-gradient( purple, black);
            border-radius: 15px;
            text-align: center;
        }

        .buttonSize {
            max-width: 110px;
            float: left;
            margin: auto;
            margin-left: 10px;
        }
        #lvlStatusTxt {
            background-image:url(images/topBanner.png);
            background-repeat:no-repeat;
            background-position: top;
            color: red;
            font-size: xx-large;
            height:60px;
            padding-top: 7px;
            margin-top: 10%;
        }
        #tryAgainText {
            margin-top: 15px;
            background-image: radial-gradient( brown, black);
        }
        #startOver {
            background-image: radial-gradient( blue, black);
        }

    </style>
    <link rel="stylesheet" type="text/css" href="animate.css">

    <script src="phaser.min.js"></script>
    <script src="box2d-plugin-full.js"></script>
    <script src="guiStack_New.js"></script>
  
    <!--<script type="text/javascript" src="lib/jquery-2.1.3.min.js"></script>-->
    <script type="text/javascript" src="js/index.js"></script>

</head>
<body>
    
 
   <div id="gameDiv"></div>
    <div id="loadingGG"><IMG SRC="images/loading4.gif"></div>

    <div id="wrongorientation"></div>

    <audio id="NiceSound" class="gameSounds">
        <source src="assets\sounds\\loops/OveMelaa-ItaloUnlimited.mp3" type="audio/mp3">
    </audio>
    <!--SELF Advertising-->`
    <div id="selfInterstatial">
        
        <!--<div id="closeSelfAd">X</div>-->
        <div id="adTimerX"> 30 </div>
        <div id="selfAdMain">
            

            <video id="promoVid1" width="265" height="470" >
                <source src="assets/starMatchPromo.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <!--<div id="labelSelfInter"> Star Match 2048 </div>-->
            <div id="selfAdInner">
                <img id="selfAdGraphic" src="images/starMatchPromo1.png" />
            
            </div>
          
            <a id="gameLink" class="external-link" href='https://play.google.com/store/apps/details?id=com.GuiGhostGames.StarMatch2048' target='_blank'><img id="gPlayImg" alt='Get it on Google Play' src='images/google-play-badge_altered.png' /></a>
      
        </div>
    </div>

    <div id="rateMe" >
        <div id="rateMeInner" class="fadeIn " >
            <div id="rateMeTopWrap">

                <div id="rateMeText"> 
                    <h2>Please Rate Our App</h2>
                <p> It takes only a moment and helps alot</p>
                </div>
                
            </div>
            <div id="rateMeImage" class="heartBeat"> <img id="rateImage" alt='Rate on Google Play' src='images/ratingstars.png' />   </div>

            <div id="rateMeBtnWrap" >

                <div id="rateMeBtnNo" class="rateBtn">No Thanks</div>
                
                <div id="rateMeBtnYes" class="rateBtn"> <b>Rate Now</b>  </div>
                <div id="rateMeBtnLater" class="rateBtn">Later</div>
            </div>
         

        </div>

    </div>
    <div id="levelComplete" class="zoomInDown">
        <div id="levelCompleteInner">
            <div id="headFailed">
                <!--<img id="bannerImg" src="images/topBanner.png"/>-->
                <div id="lvlStatusTxt"><p>FAILED</p> </div>
            </div>
            <div id="LevelComleteTextDiv">
                <div id="goalText" class="rowBackFail">Level Goal <h4 id="goalHtml" >25</h4> </div>
                <div id="yourScoreText" class="rowBackFail">Your Score <h4 id="scoreHtml">0</h4> </div>
                <!--<div id="tryAgainText"  class="rowBackFail2"><img class="buttonSize" id="continueBtnHtml" src="images/continueButton.png" />Try Again </div>
                <div id="SkipLevelText"  class="rowBackFail2" ><img class="buttonSize   heartBeat" id="viewAdBtnHtml"  src="images/viewAd.png" />Skip Level </div>
                <div id="startOver" class="rowBackFail2"><img class="buttonSize" id="startoverBtnHtml" src="images/playButtonNew.png" /> Start Over </div>-->
                <div id="tryAgainText" class="rowBackFail2">Try Again </div>
                <div id="SkipLevelText" class="rowBackFail2">Skip Level </div>
                <div id="startOver" class="rowBackFail2">Start Over </div>
        
            </div>
         
           
            <div id="LevelComleteSkipBtn"></div>
            <div id="LevelComleteQuitBtn"></div>

        </div>

    </div>

 
    <div id="leftAdBar">
        <iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=guighost-20&marketplace=amazon&region=US&placement=B07SR1BRN5&asins=B07SR1BRN5&linkId=a12838dc2659e081dd5bd9f1c1ac3cd5&show_border=false&link_opens_in_new_window=false&price_color=333333&title_color=0066C0&bg_color=FFFFFF"></iframe>
        <iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=guighost-20&marketplace=amazon&region=US&placement=B07RX6FBFR&asins=B07RX6FBFR&linkId=97ed958c2c381f17391a99c71a600952&show_border=false&link_opens_in_new_window=false&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>
    </div>
    <div id="rightAdBar">
        <iframe src="//rcm-na.amazon-adsystem.com/e/cm?o=1&p=11&l=ez&f=ifr&linkID=692ac2ae1b87ac1549a2749e07927cf6&t=guighost-20&tracking_id=guighost-20" width="120" height="600" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0"></iframe>
    </div>
  

 <script type=text/javascript>

           if (localStorage.getItem("rateMeNever") == null) {
            localStorage.setItem("rateMeNever", 1);
    }

     //cordova in app browser
    window.addEventListener('load', (event) => {
  //console.log('page is fully loaded');


     var selfAdGraphic = document.getElementById("promoVid1")
          selfAdGraphic.addEventListener("click",openLink);


     var gPlayImg = selfdGraphic = document.getElementById("gPlayImg")
          gPlayImg.addEventListener("click", openLink);


       var rateMeBtnYes = selfdGraphic = document.getElementById("rateMeBtnYes")
          rateMeBtnYes.addEventListener("click", openRateOnPlay);


       var rateMeBtnNo = selfdGraphic = document.getElementById("rateMeBtnNo")
          rateMeBtnNo.addEventListener("click", closeRate1);

       var rateMeBtnLater = selfdGraphic = document.getElementById("rateMeBtnLater")
          rateMeBtnLater.addEventListener("click", closeRate2);

        var rateImage = selfdGraphic = document.getElementById("rateImage")
          rateImage.addEventListener("click", openRateOnPlay);


     ///start level end loss modal
    document.getElementById("tryAgainText").addEventListener("click", handleLevelPopup);
    document.getElementById("tryAgainText").addEventListener("touchstart", handleLevelPopup);

    document.getElementById("SkipLevelText").addEventListener("click", handleLevelPopup2);
    document.getElementById("SkipLevelText").addEventListener("touchstart", handleLevelPopup2);

    document.getElementById("startOver").addEventListener("click", handleLevelPopup3);
    document.getElementById("startOver").addEventListener("touchstart", handleLevelPopup3);

     });



     function closeRate1() {
                document.getElementById("rateMe").style.display = 'none';
               localStorage.setItem("rateMeNever", 1)

        }
       function closeRate2() {
                document.getElementById("rateMe").style.display = 'none';
               localStorage.setItem("rateMeNever", 0)

			}

        function openRateOnPlay() {
                document.getElementById("rateMe").style.display = 'none';
             try { cordova.plugins.market.open('com.GuiGhostGames.StackerBoB'); }
                catch (err) { console.log("caught = " + err) }


          }

         function openLink() {
      try { cordova.plugins.market.open('com.GuiGhostGames.StarMatch2048'); }
                catch (err) { console.log("caught = " + err) }

          }
        var selfPromote = false;
        var selfTick = 0;
        var adTimerDiv = document.getElementById("adTimerX");

        var selfAdCountdown = 30;
        var selfAdLocalStore = localStorage.getItem("showSelfAd");

        function checkSelfPromote() {
            selfTick++;
            if (selfTick == 3) {
                selfPromote = true; selfTick = 0;
                localStorage.setItem("showSelfAd", 1);
            selfAdLocalStore = 1;
            };

           // console.log("selfAdLocalStore  showSelfAd = " + selfAdLocalStore);
            if (selfAdLocalStore == 1) {

                var selfInter = document.getElementById("selfInterstatial");
                selfInter.style.display = "block";
                selfInter.className += "zoomInRight";
                handleAdTimer();
                localStorage.setItem("showInterstatial", 0);
                selfPromote = false;
                localStorage.setItem("showSelfAd", 0);
                selfAdLocalStore = 0
                var gPlayBtn = document.getElementById("gPlayImg");
                gPlayBtn.className += "heartBeat";
                var myVideo = document.getElementById("promoVid1");
                myVideo.play();
     	        localStorage.setItem("showInterstatial", 0)
			}
            else {
                console.log("self Promote NOT active- fireEnhance");
                fireEnhance();
     	        localStorage.setItem("showInterstatial", 0)
            }

        }
        function fireEnhance() {

                //try { Enhance.isInterstitialReady(callback); }
                //catch (err) { console.log("caughtx = " + err) }
                //localStorage.setItem("showInterstatial", 0);

        }

     function fireEnhance2(){

               //try { Enhance.isRewardedAdReady(callback2); showRewarded = 0; }
               // catch (err) { console.log("Caught rewarded error " + err) }
     }
////interstitial ads
 //       var callback = function (result) {
 //              if(!result) {
 //                    console.log('Interstitial ad is not ready');

 //                   return;
 //               }
 //               try { Enhance.showInterstitialAd(); }
 //               catch (err) { console.log("caughtError = " + err) };

 //       };

 //         ///rewarded ad callbacks
 //   var rewardedCompleted = 0;
	//var rewardType = 'COINS';
	//var rewardValue = 1;
 //    var callback2 = function (result) {
 //       if (!result) {
 //           app.writeLog('Rewarded ad is not ready');
 //           return;
 //       }

 //       // The ad is ready
 //       var onRewardGranted = function (rewardValue, rewardType) {
 //           if (rewardType == Enhance.RewardType.ITEM)
 //               app.writeLog("Reward granted (item)"),
 //               rewardedCompleted = 1;

 //           else if (rewardType == Enhance.RewardType.COINS)
 //               app.writeLog("Reward granted (coins), value: " + rewardValue),
 //           rewardedCompleted = 1;
 //       };

 //       var onRewardDeclined = function () {
 //           app.writeLog('Reward declined'),
 //           rewardedCompleted = 0;
 //       };

 //       var onRewardUnavailable = function () {
 //           app.writeLog('Reward unavailable');
 //           rewardedCompleted = 0;
 //       };

 //       try {Enhance.showRewardedAd(onRewardGranted, onRewardDeclined, onRewardUnavailable); }
 //       catch (err) { console.log("caughtError = " + err) };
 //   };

    var adIntervalWin = setInterval(function () {
       var thisTimeWin =  localStorage.getItem("showInterstatial")
		if (thisTimeWin == 1){	    checkSelfPromote();		}
       }, 1000);

       var currentAdStep = 0;
        var adImgStep = 1;
        var adImg = document.getElementById("selfAdGraphic");
        var timerInProgress = 1;
        function handleAdTimer() {
            if (timerInProgress == 1) {
                timerInProgress = 0;

               var adInterval = setInterval(function () {
                                    currentAdStep++;
                                    selfAdCountdown = selfAdCountdown - 1;
                                     adTimerDiv.innerHTML = selfAdCountdown;
                                      if (selfAdCountdown <= 0) {
                                                                adTimerDiv.innerHTML = "X";
                                                                selfAdCountdown = 0;
                                                                adTimerDiv.addEventListener("click",closeSelfAd);
                                                }
                                     if (currentAdStep > 30) {
                                                                clearInterval(adInterval);
                                                                currentAdStep = 0;
                                                                adImgStep = 1;
                                                                selfAdCountdown == 0;
                                               }
                                }, 1000);


            }
            else { timerInProgress = 1; }
        }


           function closeSelfAd() {
                        //console.log("entered check")
                        if (selfAdCountdown == 0) {
                                   // console.log("passed check")
                                     document.getElementById("selfInterstatial").style.display = "none";
                                    currentAdStep = 0;
                                    selfAdCountdown = 30;
                                    adImgStep = 1;

                                    }

                        }


       if (localStorage.getItem("showReview") == null) {
            localStorage.setItem("showReview", true);
    }
      if (localStorage.getItem("timesPlayed") == null) {
            localStorage.setItem("timesPlayed", 0);
    }
     var timesPlayed = localStorage.getItem("timesPlayed")
     timesPlayed++
     localStorage.setItem("timesPlayed", timesPlayed);


        var showItOrNo = localStorage.getItem("showInterstatial");
         var showReview = localStorage.getItem("showReview");

        var onceOnlyAd = 0;

       var levelEndModal = document.getElementById("levelComplete");

     //try again
    function handleLevelPopup(evt) {
       // console.log("still here")
        evt.preventDefault()
        showItOrNo = localStorage.getItem("showInterstatial");
        showReview = localStorage.getItem("showReview");

        if (showItOrNo == 1 ) {
			checkSelfPromote();
			setTimeout(function(){
            localStorage.setItem("showInterstatial", 0);
			levelEndModal.style.display = 'none'
			game.state.start("PlayGame");

			}, 2000);
	     }
	    else {
			levelEndModal.style.display = 'none'
			game.state.start("PlayGame");
	    }
    }
     //view ad and skip level
     var firstClick2 = 0;
    function handleLevelPopup2(evt) {
     if (firstClick2 == 0 ) {
        firstClick2 = 1;
        evt.preventDefault()
      //  console.log("still here2")
		fireEnhance2()

      setTimeout(function(){
            levelEndModal.style.display = 'none';
            LEVEL =  localStorage.getItem("stackerLevel");
            LEVEL = parseInt(LEVEL) + 1;
            localStorage.setItem("stackerLevel", LEVEL);
            game.state.start("PlayGame");
            firstClick2 = 0;
        }, 4000);
     }
    }
     //start over
    function handleLevelPopup3(evt) {
        evt.preventDefault()
       // console.log("still here3")
        levelEndModal.style.display = 'none'
        LEVEL = 1;
        game.state.start("PlayGame");

    }











 </script>




</body>
</html>
<!--//Credits to http://www.emanueleferonato.com/ for the tuturial on the javascript that started this project-->