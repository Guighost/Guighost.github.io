var savedScore; gameOver = { init: function () { game.log(), savedScore = ("        " + score).slice(-8) }, create: function () { this.add.image(0, 0, "background"); for (var e = [], a = 0; a < game.global.tileTypes; a++)e.push(a); var t = game.add.emitter(160, -30, 50); t.makeParticles("tiles", e), t.maxParticleScale = 1, t.minParticleScale = .7, t.setYSpeed(30, 40), t.setXSpeed(-3, 3), t.gravity = 0, t.width = 320, t.minRotation = 0, t.maxRotation = 40, t.flow(15e3, 2e3); var o = 0; try { o = localStorage.getItem("GuiGemTrax_HighScore") } catch (e) { console.log(e), o = 0 } var r = 0; r = Number(o), console.log("output " + r), console.log("oldScore " + r), console.log("savedScore" + savedScore), r < savedScore && localStorage.setItem("GuiGemTrax_HighScore", savedScore), highscoreTextM = game.add.bitmapText(40, 270, "systemfont", "Best: ", 36), highscoreText = game.add.bitmapText(155, 270, "scorefont", o, 36), highscoreText.align = "center", highscoreText.x = (game.width - scoreText.textWidth) / 2 + 20, o < savedScore && (highscoreText.bitmapText = 36), scoreText = game.add.bitmapText(160, 180, "scorefont", savedScore, 48), scoreText.align = "center", scoreText.x = (game.width - scoreText.textWidth) / 2 - 20, game.add.image(160, 70, "gameover").anchor.setTo(.5), game.add.button(160, 360, "playbutton", this.playTheGame, this).anchor.setTo(.5).clicked = !1 }, playTheGame: function (e) { if (!e.cliked) { e.cliked = !0, game.global.playerLevel = 1; var a = game.add.sprite(0, 0, "blackfade"); a.alpha = 0; var t = game.add.tween(a); t.to({ alpha: 1 }, 500, Phaser.Easing.Cubic.Out, !0), t.onComplete.add(function () { game.state.start("TheGame") }, this) } } };